<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Data format • rsofun</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data format">
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rsofun</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/geco-bern/rsofun/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Data format</h1>
                        <h4 data-toc-skip class="author">Koen Hufkens,
Josefa Arán</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/geco-bern/rsofun/blob/master/vignettes/data_format.Rmd" class="external-link"><code>vignettes/data_format.Rmd</code></a></small>
      <div class="d-none name"><code>data_format.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="philosophy">Philosophy<a class="anchor" aria-label="anchor" href="#philosophy"></a>
</h2>
<p>Overall, the package uses the {tidyverse} data paradigm (Wickham,
2017), using nested data frames (tibbles) to store model input and
output, and validation data. Where possible the package uses a
consistent ontogeny in terms of variables and data structures used.</p>
</div>
<div class="section level2">
<h2 id="drivers-data-inputs">Drivers data (inputs)<a class="anchor" aria-label="anchor" href="#drivers-data-inputs"></a>
</h2>
<p>A drivers object is used as unique input to the models, consisting of
a list of sites. Each site (i.e. row) contains the following data: -
<code>sitename</code>: site name - <code>site_info</code>: location
specific site information (nested tibble) - <code>params_siml</code>:
simulation parameter settings (nested tibble) - <code>forcing</code>:
environmental forcing data (nested tibble)</p>
<p>Each of the provided demo drivers contain only one sample site:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># call to the included p-model demo drivers</span></span>
<span><span class="fu">rsofun</span><span class="fu">::</span><span class="va"><a href="../reference/p_model_drivers.html">p_model_drivers</a></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   sitename params_siml       site_info        forcing              </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FR-Pue   <span style="color: #949494;">&lt;tibble [1 × 11]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 4]&gt;</span> <span style="color: #949494;">&lt;tibble [2,190 × 13]&gt;</span></span></span>
<span></span>
<span><span class="co"># call to the included BiomeE (p-model) demo drivers</span></span>
<span><span class="fu">rsofun</span><span class="fu">::</span><span class="va"><a href="../reference/biomee_p_model_drivers.html">biomee_p_model_drivers</a></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 8</span></span></span>
<span><span class="co">#&gt;   sitename site_info params_siml params_tile params_species init_cohort</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> CH-Lae   <span style="color: #949494;">&lt;tibble&gt;</span>  <span style="color: #949494;">&lt;tibble&gt;</span>    <span style="color: #949494;">&lt;tibble&gt;</span>    <span style="color: #949494;">&lt;tibble&gt;</span>       <span style="color: #949494;">&lt;tibble&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: init_soil &lt;list&gt;, forcing &lt;list&gt;</span></span></span>
<span></span>
<span><span class="co"># call to the included BiomeE (gs leuning) demo drivers</span></span>
<span><span class="fu">rsofun</span><span class="fu">::</span><span class="va"><a href="../reference/biomee_gs_leuning_drivers.html">biomee_gs_leuning_drivers</a></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 8</span></span></span>
<span><span class="co">#&gt;   sitename site_info params_siml params_tile params_species init_cohort</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> CH-Lae   <span style="color: #949494;">&lt;tibble&gt;</span>  <span style="color: #949494;">&lt;tibble&gt;</span>    <span style="color: #949494;">&lt;tibble&gt;</span>    <span style="color: #949494;">&lt;tibble&gt;</span>       <span style="color: #949494;">&lt;tibble&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: init_soil &lt;list&gt;, forcing &lt;list&gt;</span></span></span></code></pre></div>
<p>Nested data structures can be accessed like this:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Accessing the site information for the first site</span></span>
<span><span class="fu">rsofun</span><span class="fu">::</span><span class="va"><a href="../reference/biomee_gs_leuning_drivers.html">biomee_gs_leuning_drivers</a></span><span class="op">$</span><span class="va">site_info</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 10</span></span></span>
<span><span class="co">#&gt;     lon   lat   elv year_start year_end c4    igbp_land_use</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>  8.36  47.5   700       <span style="text-decoration: underline;">2</span>004     <span style="text-decoration: underline;">2</span>014 FALSE Mixed Forests</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: plant_functional_type &lt;chr&gt;, date_start &lt;date&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   date_end &lt;date&gt;</span></span></span></code></pre></div>
<div class="section level3">
<h3 id="specific-data-for-each-model">Specific data for each model<a class="anchor" aria-label="anchor" href="#specific-data-for-each-model"></a>
</h3>
<p>Each model has its own specificities when it comes to the set of
simulation parameters and forcing data. Please refer to the
documentation for each model for an exhaustive list of parameters and
data required by the model.</p>
<ul>
<li>P-model: <code><a href="../reference/run_pmodel_f_bysite.html">?run_pmodel_f_bysite</a></code>
</li>
<li>BiomeE: <code><a href="../reference/run_biomee_f_bysite.html">?run_biomee_f_bysite</a></code>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="forcing-data">Forcing data<a class="anchor" aria-label="anchor" href="#forcing-data"></a>
</h3>
<p>The forcing data contains environmental variables commonly available
at fluxnet (reference) or ICOS atmospheric gas exchange measurement
locations or gathered from various gridded or re-analysis sources.
Forcing data are expected to be sequences of complete years (each
starting on January 1st and ending on december 31st), where leap days
are excluded (February 29th should not be present).</p>
<p>Each model has a specific forcing data resolution: - P-model: daily -
BiomeE (p-model): daily - BiomeE (gs leuning): hourly</p>
<p>Forcing data present in the demo drivers can be used as examples:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Detailed look at the forcing data for the P-model</span></span>
<span><span class="fu">rsofun</span><span class="fu">::</span><span class="va"><a href="../reference/p_model_drivers.html">p_model_drivers</a></span><span class="op">$</span><span class="va">forcing</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2,190 × 13</span></span></span>
<span><span class="co">#&gt;    date        temp   vpd      ppfd netrad    patm  snow     rain  tmin</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2007-01-01 10.0  183.  0.000<span style="text-decoration: underline;">106</span>    4.17  <span style="text-decoration: underline;">99</span>944.     0  2.55<span style="color: #949494;">e</span><span style="color: #BB0000;">-5</span>  7.12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2007-01-02  8.42 417.  0.000<span style="text-decoration: underline;">192</span>  -<span style="color: #BB0000;">22.2</span>   <span style="text-decoration: underline;">99</span>992.     0  6.94<span style="color: #949494;">e</span><span style="color: #BB0000;">-6</span>  6.79</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2007-01-03  9.13 566.  0.000<span style="text-decoration: underline;">187</span>  -<span style="color: #BB0000;">16.6</span>  <span style="text-decoration: underline;">100</span>075      0  0   <span style="color: #949494;"> </span>    4.21</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2007-01-04 10.1  375.  0.000<span style="text-decoration: underline;">082</span>8 -<span style="color: #BB0000;">16.8</span>   <span style="text-decoration: underline;">99</span>338.     0  0   <span style="color: #949494;"> </span>    3.96</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2007-01-05 10.7  508.  0.000<span style="text-decoration: underline;">183</span>   -<span style="color: #BB0000;">6.60</span>  <span style="text-decoration: underline;">99</span>419.     0  0   <span style="color: #949494;"> </span>    9.26</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2007-01-06 13.6  656.  0.000<span style="text-decoration: underline;">188</span>  -<span style="color: #BB0000;">11.2</span>   <span style="text-decoration: underline;">99</span>467.     0  0   <span style="color: #949494;"> </span>    8.96</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2007-01-07 13.7  567.  0.000<span style="text-decoration: underline;">155</span>    7.32  <span style="text-decoration: underline;">99</span>252.     0  0   <span style="color: #949494;"> </span>    9.55</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2007-01-08 10.7  273.  0.000<span style="text-decoration: underline;">071</span>7  -<span style="color: #BB0000;">3.00</span>  <span style="text-decoration: underline;">98</span>871.     0  0   <span style="color: #949494;"> </span>    7.04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2007-01-09 16.4  682.  0.000<span style="text-decoration: underline;">188</span>    9.94  <span style="text-decoration: underline;">99</span>067.     0  0   <span style="color: #949494;"> </span>    9.46</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2007-01-10 11.4   26.0 0.000<span style="text-decoration: underline;">027</span>7  -<span style="color: #BB0000;">6.41</span>  <span style="text-decoration: underline;">99</span>444.     0  0   <span style="color: #949494;"> </span>    8.98</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2,180 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 4 more variables: tmax &lt;dbl&gt;, fapar &lt;dbl&gt;, co2 &lt;dbl&gt;, ccov &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="output-data">Output data<a class="anchor" aria-label="anchor" href="#output-data"></a>
</h2>
<p>The output of the model contains one line per site found in the
drivers: - <code>sitename</code>: site name - <code>data</code>: output
data for the site (nested tibble)</p>
<p>The data structure for the output <code>data</code> is specific for
each model.</p>
<div class="section level3">
<h3 id="p-model">P-model<a class="anchor" aria-label="anchor" href="#p-model"></a>
</h3>
<p>For detailed information about the content of <code>data</code>, see
<code><a href="../reference/run_pmodel_f_bysite.html">?run_pmodel_f_bysite</a></code>.</p>
</div>
<div class="section level3">
<h3 id="biomee">BiomeE<a class="anchor" aria-label="anchor" href="#biomee"></a>
</h3>
<p><code>data</code> contains the following tables: -
<code>output_daily_tile</code>: Daily output during the simulated period
- <code>output_annual_cohorts</code>: Annual output at the cohort level
during the simulated period - <code>output_annual_tile</code>: Yearly
output during the spin-up and simulated periods.</p>
<p>For detailed information about each table, see
<code><a href="../reference/run_biomee_f_bysite.html">?run_biomee_f_bysite</a></code>.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <!-- begin footer -->
<div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/geco-bern" target="_blank" class="external-link">
                          <div class="icon fab fa-github"></div></a>
                        <a href="https://geco-group.org" target="_blank" class="external-link">
                          <div class="icon fa fa-flask"></div></a>
                        <a href="http://twitter.com/SteniBocker/" target="_blank" class="external-link">
                          <div class="icon fab fa-twitter"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://geco-group.org/" class="external-link">GECO</a></li>
                            <li><a href="https://geco-group.org/people/" class="external-link">Our Team</a></li>
                            <li><a href="https://geco-group.org/contact/" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://github.com/geco-bern" class="external-link">Packages</a></li>
                            <li><a href="https://geco-group.org/publication/" class="external-link">Publications</a></li>
                            <li><a href="https://geco-group.org/post/" class="external-link">Blog</a></li>
                        </ul>
</div>

                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

  </div></footer>
</body>
</html>
